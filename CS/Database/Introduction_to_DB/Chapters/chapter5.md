# Chapter 5. 관계 데이터 모델

## 관계 데이터 모델의 개념
### 관계 데이터 모델의 기본 용어
- 속성 : 릴레이션의 열, 애트리뷰트라고도 불림
- 릴레이션은 파일 관리 시스템에서의 파일, 속성은 해당 파일의 필드에 대응하는 개념이다.
- 튜플 : 릴레이션의 행
- 튜플은 파일 관리 시스템 관점에서 해당 파일의 레코드에 대응하는 개념이다.
- 도메인 : 속성 하나가 가질 수 있는 모든 값의 집합
- 차수 : 하나의 릴레이션에서 속성의 전체 개수
- 카디널리티 : 하나의 릴레이션에서 튜플의 전체 개수
### 릴레이션과 데이터베이스의 구성
- 관계 데이터 모델에서 릴레이션은 릴레이션 스키마와 릴레이션 인스턴스로 구성된다.
- 릴레이션 스키마 : 릴레이션의 이름과 릴레이션에 포함된 모든 속성의 이름으로 정의하는 릴레이션의 논리적 구조
- 릴레이션 인스턴스 : 어느 한 시점에 릴레이션에 존재하는 튜플들의 집합
### 릴레이션의 특성
1. 튜플의 유일성 : 하나의 릴레이션에는 동일한 튜플이 존재할 수 없다.
2. 튜플의 무순서 : 하나의 릴레이션에서 튜플 사이의 순서는 무의미하다.
    - 데이터베이스는 위치가 아닌 내용으로 검색되므로 튜플의 순서는 중요하지 않다.
3. 속성의 무순서 : 하나의 릴레이션에서 속성 사이의 순서는 무의미하다.
4. 속성의 원자성 : 속성 값으로 원자 값만 사용할 수 있다.
    - 모든 속성 값은 더는 분해할 수 없는 하나의 값, 즉 원자 값만 가질 수 있다.
### 키의 종류
- 릴레이션에 포함된 튜플들을 유일하게 구별해주는 역할은 속성 또는 속성들의 집합인 키가 담당한다.
- 관계 데이터 모델에서는 키를 슈퍼키, 후보키, 기본키, 대체키, 외래키의 다섯 가지로 분류할 수 있다.
1. 슈퍼키
    - 슈퍼키는 유일성의 특성을 만족하는 속성 또는 속성들의 집합이다.
    - 유일성은 키가 갖추어야 하는 기본 특성으로, 하나의 릴레이션에서 키로 지정된 속성 값은 튜플마다 달라야 한다는 의미다.
2. 후보키
    - 후보키는 유일성과 최소성을 만족하는 속성 또는 속성들의 집합이다.
    - 최소성은 꼭 필요한 최소한의 속성들로만 키를 구성하는 특성이다.
    - 후보키는 튜플을 유일하게 구별하기 위해 꼭 필요한 최소한의 속성들로만 이루어지므로 슈퍼키 중에서 최소성을 만족하는 것이 후보키가 된다.
    - 후보키가 되기 위해 만족해야 하는 유일성과 최소성의 특성은 새로운 튜플이 삽입되거나 기존 튜플의 속성 값이 바뀌어도 유지되어야 한다.
3. 기본키 
    - 릴레이션에서 튜플을 구별하기 위해 여러 개의 후보키를 모두 사용할 필요는 없다. 데이터베이스 설계자나 관리자는 여러 후보키 중에서 기본적으로 사용할 키를 반드시 선택해야 하는데 이것이 기본키다.
    - 널 값을 가질 수 있는 속성이 포함된 후보키는 기본키로 부적합하다.
    - 값이 자주 변경될 수 있는 속성이 포함된 후보키는 기본키로 부적합하다.
    - 단순한 후보키를 기본키로 선택한다.
4. 대체키
    - 대체키는 기본키로 선택되지 못한 후보키들이다.
5. 외래키
    - 외래키는 어떤 릴레이션에 소속된 속성 또는 속성 집합이 다른 릴레이션의 기본키가 되는 키다.
    - 외래키를 가진 릴레이션을 '참조하는 릴레이션'이라 하고, 기본키를 가진 릴레이션을 '참조되는 릴레이션'이라 한다.
    - 하나의 릴레이션에는 외래키가 여러 개 존재할 수도 있다. 또한 외래키를 기본키로 사용할 수도 있고 외래키를 포함하여 기본키를 구성할 수도 있다.
    - 외래키가 다른 릴레이션의 기본키를 참조하는 것이라고 정의했지만, 반드시 다른 릴레이션을 참조할 필요는 없다. 참조하는 릴레이션과 참조되는 릴레이션이 같을 수도 있다.

## 관계 데이터 모델의 제약
- 관계 데이터 모델에서 정의하고 있는 기본 제약 사항은 키와 관련한 무결성 제약조건이다.
- 무결성은 데이터에 결함이 없는 상태, 즉 데이터가 정확하고 유효하게 유지된 상태를 말한다.
- 데이터베이스가 삽입, 삭제, 수정 연산으로 상태가 변하더라도 무결성 제약조건은 반드시 지켜져야 한다.
- 보안이 권한이 없는 사용자로부터 데이터를 보호하는 것이라면, 무결성은 권한이 있는 사용자의 잘못된 요구에 의해 데이터가 부정확해지지 않도록 보호하는 것이다.
- 관계 데이터 모델이 기본으로 포함하고 있는 무결성 제약조건에는 개체 무결성 제약조건과 참조 무결성 제약조건이 있다.
1. 개체 무결성 제약조건
    - 개체 무결성 제약조건은 기본키를 구성하는 모든 속성은 널 값을 가지면 안 된다는 규칙이다.
2. 참조 무결성 제약조건
    - 참조 무결성 제약조건이란 외래키는 참조할 수 없는 값을 가질 수 없다는 규칙이다.
    - 외래키가 자신이 참조하는 릴레이션의 기본키와 상관이 없는 값을 가지게 되면 두 릴레이션을 연관시킬 수 없으므로 외래키 본래의 의미가 없어진다.