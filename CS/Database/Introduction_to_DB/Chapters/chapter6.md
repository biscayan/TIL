# Chapter 6. 관계 데이터 연산

## 관계 데이터 연산의 개념
- 데이터 모델은 데이터 구조, 연산, 제약조건으로 구성된다.
- 관계 데이터 모델에서 연산은 원하는 데이터를 얻기 위해 릴레이션에 필요한 처리 요구를 수행하는 것으로, 데이터베이스 시스템의 구성 요소 중 데이터 언어의 역할을 한다.
- 관계 데이터 모델의 연산을 간단히 관계 데이터 연산이라고도 하며 관계 대수와 관계 해석으로 구성된다. 
- 관계 대수는 원하는 결과를 얻기 위해 데이터의 처리 과정을 순서대로 기술하는 절차 언어이며, 관계 해석은 원하는 결과를 얻기 위해 처리를 원하는 데이터가 무엇인지만 기술하는 비절차 언어이다.
- 데이터를 처리하는 기능과 처리를 요구하는 표현력에서 관계 대수와 관계 해석은 능력이 동등하다. 관계 대수로 기술된 데이터 처리 요구는 관계 해석으로도 기술할 수 있고, 관계 해석으로 기술된 데이터 처리 요구를 관계 대수로도 기술할 수 있다.

### 관계 대수
#### 관계 대수의 개념과 연산자
- 관계 대수는 원하는 결과를 얻기 위해 릴레이션을 처리하는 과정을 순서대로 기술하는 언어다.
- 관계 대수에 속하는 대표적인 연산자 8개는 특성에 따라 일반 집합 연산자와 순수 관계 연산자로 분류할 수 있다. 
- 일반 집합 연산자는 릴레이션이 튜플의 집합이라는 개념을 이용하고, 순수 관계 연산자는 릴레이션의 구조와 특성을 이용한다.
#### 일반 집합 연산자
- 일반 집합 연산자 : 합집합, 교집합, 차집합, 카티션 프로덕트
- 일반 집합 연산자는 연산을 위해 피연산자가 2개 필요하다. 즉, 일반 집합 연산자는 2개의 릴레이션을 연산한다.
- 합집합, 교집합, 차집합은 피연산자인 2개의 릴레이션이 합병 가능(두 릴레이션의 차수가 같고 서로 대응되는 속성의 도메인이 같다)해야 한다.
1. 합집합
    - 합집합 연산의 결과 릴레이션은 중복 튜플이 존재할 수 없다.
    - 합집합 연산을 한 후 얻게 되는 결과 릴레이션의 차수는 피연산자인 릴레이션 R과 S의 차수와 같다. 카디널리티는 중복이 없기 때문에 릴레이션 R과 S의 튜플 개수를 더한 것과 같거나 적어진다.
2. 교집합
    - 교집합 연산을 한 후 얻게 되는 결과 릴레이션의 차수는 피연산자인 릴레이션 R과 S의 차수와 같다. 카디널리티는 릴레이션 R과 S의 어떤 카디널리티보다 크지 않다. 즉, 같거나 적다.
3. 차집합
    - 차집합 연산을 한 후 얻게 되는 결과 릴레이션의 차수는 피연산자인 릴레이션 R과 S의 차수와 같다. 카디널리티는 릴레이션 R이나 S의 카디널리티와 같거나 적다.
4. 카티션 프로덕트
- R X S는 릴레이션 R에 속한 각 튜플과 릴레이션 S에 속한 각 튜플을 모두 연결하여 만들어진 새로운 튜플로 결과 릴레이션을 구성한다.
- 앞의 연산들과 다르게 카티션 프로덕트는 두 릴레이션이 합병 불가능한 경우에도 연산이 가능하다.
- 카티션 프로덕트 연산을 한 후 얻게 되는 결과 릴레이션의 차수는 피연산자인 릴레이션 R과 S의 차수를 더한 것과 같다. 카디널리티는 릴레이션 R과 S의 카디널리티를 곱한 것과 같다.
#### 순수 관계 연산자
- 순수 관계 연산자 : 셀렉트, 프로젝트, 조인, 디비전
1. 셀렉트
    - 릴레이션에서 주어진 조건을 만족하는 튜플만 선택하여 결과 릴레이션을 구성한다. 
    - 결과 릴레이션은 주어진 릴레이션을 수평으로 절단한 모양이 되며 해당 릴레이션에서 수평적 부분집합을 생성한 것과 같다.
2. 프로젝트
    - 릴레이션에서 선택한 속성에 해당하는 값으로 결과 릴레이션을 구성한다.
    - 결과 릴레이션이 주어진 릴레이션의 일부 열로만 구성되어 해당 릴레이션에서 수직적 부분집합을 생성한 것과 같다.
3. 조인
    - 릴레이션 하나로 원하는 데이터를 얻을 수 없어 관계가 있는 여러 릴레이션을 함께 사용해야 하는 경우에는 조인 연산을 이용한다.
    - 조인 속성을 이용해 두 릴레이션을 조합하여 하나의 결과 릴레이션을 구성한다.
    - 두 릴레이션을 조인할 때는 조인 속성의 값이 같은 튜플만 연결하여 결과 릴레이션을 구성해야 한다.
    - 결과 릴레이션의 차수는 릴레이션1의 차수와 릴레이션2의 차수를 더한 것과 같다. 그리고 이름이 같은 속성이 존재한다면 결과 릴레이션에서는 '릴레이션이름.속성이름'과 같이 표기법을 이용해 구분한다.
#### 확장된 관계 대수 연산자
1. 세미 조인
    - 세미 조인은 릴레이션 S의 조인 속성으로만 구성한 릴레이션을 릴레이션 R에 자연 조인하는 것이다.
2. 외부 조인
    - 외부 조인은 두 릴레이션에 자연 조인 연산을 수행할 때 조인 속성 값이 같은 튜플이 상대 릴레이션에 존재하지 않아 조인 연산에서 제외된 모든 튜플을 결과 릴레이션에 포함시킨다.