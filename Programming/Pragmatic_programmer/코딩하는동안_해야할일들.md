# 코딩하는 동안 해야 할 일들
일단 코딩에 들어가면 대부분 기계적으로 따라가야 하는 일, 곧 설계 내용을 컴퓨터가 실행할 수 있는 문장으로 바꾸는 일만 남는다는 생각이 일반적이다.  
하지만 코딩은 기계적인 작업이 아니다. 코딩할 때는 매분마다 결정을 내려야 하는대, 프로그램이 정확하고 생산적으로 작동하기 위해서는 사려 깊은 생각과 판단을 통한 결정이 필요하다.  

## 우연에 맡기는 프로그래밍
개발자들은 지뢰밭에서 일하는것과 같다. 우리를 기다리는 함정들이 하루에도 몇백개씩은 있다. 따라서 잘못된 결론을 내리지 않도록 언제나 주의해야 하며, 우연에 맡기는 프로그래밍, 즉 행운과 어쩌다 오는 성공에 의존하는 프로그래밍을 하지 말아야 한다. 대신 의도적으로 프로그래밍해야 한다.  
### 프로그래밍을 우연에 맡기면 어떻게 되는가 
#### 우연적 구현
우연적 구현은 단순히 코드가 지금 작성된 방식이 그렇기 때문에 생기는 일들을 가리킨다. 결국에는 문서화되지 않은 에러나 입력값이 특정한 조건에서만 돌아가는 경우와 마주치게 된다.  
#### 암묵적인 가정
요구사항을 만들어 내는 것부터 테스트에 이르기까지 어느 차원에서든 우연은 우리를 잘못된 길로 이끌 수 있다. 특히 테스팅이 거짓 원인과 우연적인 결과로 가득 찬 영역이다.  
Y의 원인은 X라고 가정하기는 쉽다. 하지만 우리는 가정하지 말고 증명을 해야 한다. 확고한 사실에 근거하지 않은 가정은 어떤 프로젝트에서든 재앙의 근원이 된다.  
### 의도적으로 프로그래밍하기
- 언제나 자기가 지금 무엇을 하고 있는지 알아야 한다.  
- 맹목적으로 코딩하지 말라.  
- 계획을 세우고 그것을 바탕으로 진행하라.  
- 신뢰할 수 있는 것에만 기대라.  
- 가정을 문서로 남겨라.  
- 코드만 테스트할 것이 아니라 우리가 세운 가정도 테스트해 봐야 한다.  
- 노력을 기울일 대상의 우선순위를 정하라.  
- 과거의 노예가 되지 말라.  

## 알고리즘의 속도
### 알고리즘을 추정한다는 말의 의미는 무엇인가?
매우 간단한 몇몇 알고리즘을 제외한 대부분의 알고리즘은 가변적인 입력 데이터를 다룬다. 그리고 입력이 크기가 클수록 알고리즘의 수행시간이 길어지거나 사용하는 메모리 양이 늘어난다.  
### 실전에서의 알고리즘 속도
만약 입력으로 들어가는 숫자 값이 한정되어 있다면, 그 코드가 실행되는데 시간이 얼마나 걸릴지 알 수 있다. 하지만 숫자가 외부 요인에 따라 달라진다면, 작업을 잠시 멈추고 커다란 수가 들어왔을 경우 수행시간이나 메모리 소비에 어떤 영향을 미칠지 생각해 보는 것이 좋다.  
코드의 실행시간이 얼마나 될지, 또는 메모리를 얼마나 사용할지 확실하지 않다면, 입력 레코드의 수나 혹은 런타임에 영향을 줄 것이라고 생각되는 요소를 바꾸어 가면서 직접 실행해보라.  
그런 다음 결과를 그래프로 그려보면 대략 감을 잡을 수 있을 것이다.  

## 리팩터링
프로그램이 발전해가면, 초기에 내린 결정을 다시 고려하고 코드의 일부분을 다시 작성하는 일이 점점 더 필요해진다. 코드는 정적인 존재가 아니며 발전해 나가야 한다.  
코드를 다시 작성하기, 다시 작업하기, 다시 설계하기는 총활해서 '리팩터링'이라고 알려져 있다.  
### 리팩터링은 언제 해야 하는가?
코드가 더 이상 잘 맞지 않아서 장애물에 부딪혔을 때, 사실은 하나로 합쳐져 있어야 할 두개를 발견했을 때, 어떤 것이든 잘못되었다고 생각될 때, 코드를 변경하는 일을 주저하면 안 된다.  
하지만 코드를 리팩터링하는 것은 굉장히 고통스러울 수 있다. 거의 작동하는 수준까지 올려놓은 코드였는데, 이제 완전히 망가져 버린다.  
### 리팩터링은 어떻게 하는가?
리팩터링의 본질은 재설계다. 설계한 모든 것들 중 새로운 사실이 밝혀지거나 문제에 대한 이해가 더 깊어지거나 요구사항이 바뀌는 것과 같은 일이 생긴다면, 언제라도 재설계의 대상이 될 수 있다.  
하지만 그렇다고 해서 거대한 코드에서 아무 부분이나 닥치는 대로 삭제해 버리면서 산산조각으로 분해한다면, 나중에는 일을 시작하기 전보다 더 좋지 않은 처지에 놓일지도 모른다.  
리팩터링은 천천히, 신중하게, 조심스럽게 진행해야 하는 작업이다.  
마틴 파울러는 손해보다 이득이 큰 방향으로 리팩터링을 하기 위한 방법을 다음과 같이 말했다.  
(1) 리팩터링과 새로운 기능 추가를 동시에 하지 말라.  
(2) 리팩터링을 시작하기 전 든든한 테스트 집합이 있는지 먼저 확인한다.  
(3) 단계를 작게 나누어서 신중하게 작업한다.  

## 테스트하기 쉬운 코드
### 단위 테스트
소프트웨어에서 단위 테스트란 어떤 모듈에게 이것저것을 시켜보는 코드를 가리킨다.  
일반적으로 단위테스트는 일종의 인위적인 환경을 구축한 다음, 테스트할 모듈의 루틴들을 호출한다. 그런 다음 반환된 결과들을 이미 알고 있는 값과 비교해 보거나 똑같은 테스트를 이전에 돌렸을 때 나온 겂과 비교해 보아서 올바른지 검사한다.  

## 사악한 마법사
어플리케이션을 작성하는 일은 날이 갈수록 힘들어지고 있다. 따라서 도구 제작사와 인프라 벤더들은 개발을 도와주는 마법사를 들고 나왔다. 버튼 하나만 누르고, 몇 가지 간단한 질문에만 대답하면, 마법사가 자동으로 골격 코드를 만들어준다.  
하지만 마법사를 사용한다고 평범한 개발자가 자동으로 높은 수준의 전문가가 되지는 않는다. 엄청난 양의 코드가 상당히 깔끔하게 만들어지는 것을 보고서 자신이 꽤 잘한다는 느낌이 들 수 있지만, 자신을 위해 만들어진 코드를 제대로 이해하지 못하는 한 자기 자신을 속이는 것에 불과하지 않는다.  
마법사가 만들어 준 코드가 지금 상황에 맞지 않는다면, 또는 상황이 바뀌어 코드를 변경해야 할 필요가 생긴다면 스스로의 힘으로 해나가야 한다.  
마법사 자체에 반대하는 것은 아니다. 하지만 마법사를 사용했을 때, 마법사가 만들어 준 코드를 모두 이해하지 못한다면, 이 어플리케이셔은 나의 것이 아니게 된다.  
그러므로 자신이 완전히 이해하지 못하는 코드를 내놓아서는 안 된다.  