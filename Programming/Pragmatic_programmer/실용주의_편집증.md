# 실용주의 편집증
완변학 소프트웨어는 존재하지 않는다. 컴퓨터 역사를 통틀어 어느 누구도 완벽한 소프트웨어를 만들지 못했다. 우리 또한 최초가 될 것 같지도 않다.  
그리고 이것을 기정 사실로 받아들이지 않는다면, 불가능한 꿈을 뒤쫓으며 시간과 노력을 낭비하게 됭 것이다.  
이런 암울한 현실 속에서 실용주의 프로그래머는 이걸 어떻게 장점으로 바꿀 수 있는가가 이번 장의 주제이다.  
실용주의 프로그래머들은 자기 자신도 믿지 않는다. 어느 누구도 완벽한 코드를 작성할 수 없음을 알기에 자신의 실수에 대비해서 방어적으로 코드를 짠다.  

## 계약에 의한 설계
### DBC
버트란드 마이어는 아이펠이라는 언어를 만들면서 계약에 의한 설계 개념을 개발했다.  
이것은 단순하지만 강력한 기법으로, 프로그램의 정확성을 보장하기 위해 소프트웨어 모듈들의 권리와 책임을 문서화하는 데에 초점을 맞춘다.

## 죽은 프로그램은 거짓말을 하지 않는다.  
때때로, 자기 스스로 문제를 인식하기 전에 다른 사람이 먼저 뭐가 문제가 있는지 알아채는 일이 있다.  
모든 에러는 정보를 준다. 에러가 발생할 리 없다고 스스로를 설득하고선 무시할 수 있다. 하지만 실용주의 프로그래머는 에러가 있다면 정말로 나쁜 일이 생긴 것이라고 자신에게 이야기한다.  
### 망치지 말고 멈추라  
문제를 빨리 발견하게 되면, 좀 더 일찍 시스템을 멈출 수 있다는 이점이 있다. 게다가 프로그램을 멈추는 것이 최선일 때가 많다.  
방금 불가능한 뭔가가 발생했다는 것을 발견한다면, 프로그램은 더 이상 유효하지 않다고 할 수 있다. 이 시점 이후로 하는 일은 모두 문제가 있으므로 되도록 빨리 종료해야 한다.

## 단정적 프로그래밍
"이런 일은 절대 일어나지 않을 거야" 라는 생각이 든다면, 그걸 확인하는 코드를 추가하라. 이걸 가장 간단히 하는 방법은 단정문(assertion)을 사용하는 것이다.

## 언제 예외를 사용할까 
예외에 문제가 있다면 하나는 이걸 언제 사용할지 아는 것이다. 우리는 예외가 프로그램의 정상 흐름의 일부로 사용되는 일은 거의 없어야 한다고 믖는다. 예외는 의외의 상황을 위해 남겨두어야 한다.  

## 리소스 사용의 균형
코딩할 때 우리는 메모리, 트랜잭션, 쓰레드, 파일, 타이머 등 리소스를 관리한다. 리소스 사용은 일정 패턴을 따른다. 리소스를 할당하고, 사용한 다음, 해제한다.  
그렇지만 많은 개발자들은 할당과 해제를 다루는 일관된 계획을 갖고 있지 않다. 따라서, 시작한 것은 끝내야 한다는 말을 명심해야 한다.  
리소스를 할당하는 루팀이 해제 역시 책임져야 한다는 것이다.  
### 균형을 점검하기
실용주의 프로그래머는 아무도 믿지 않기 때문에, 정말로 리소스가 적절하게 해제되었는지 실제로 점검하는 코드를 늘 작성하는 것이 좋다고 생각한다.  
리소스 종류마다 래퍼를 만들고 그 래퍼들이 모든 할당과 해제의 기록을 유지해야 한다.  
코드 속에서 프로그램 논리에 따르자면 자원들이 반드시 이런 상태에 있어야 한다고 말할 지점들이 있을 것이다. 래퍼들을 사용해서 정말 그런지 점검해야 한다.  